<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | 隨筆</title><meta name=keywords content><meta name=description content="Posts - 隨筆"><meta name=author content><link rel=canonical href=https://harveyChang67.github.io/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.min.5e2b4101351c21e906f398ae96901791830f58d430f96f2659dab7eaef7b3cb7.css integrity="sha256-XitBATUcIekG85iulpAXkYMPWNQw+W8mWdq36u97PLc=" rel="preload stylesheet" as=style><link rel=icon href=https://harveyChang67.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://harveyChang67.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://harveyChang67.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://harveyChang67.github.io/apple-touch-icon.png><link rel=mask-icon href=https://harveyChang67.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><link rel=alternate type=application/rss+xml href=https://harveyChang67.github.io/posts/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-88L9K87ZCW"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-88L9K87ZCW',{anonymize_ip:!1})}</script><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://harveyChang67.github.io/posts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://harveyChang67.github.io/posts/"}]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://harveyChang67.github.io/ accesskey=h title="隨筆 (Alt + H)">隨筆</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://harveyChang67.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://harveyChang67.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2>Lock</h2></header><section class=entry-content><p>單機鎖 TODO
分布式鎖 相關 單機鎖–>分布式鎖：架構面試題 #1, 線上交易的正確性 將 Redlock 有關的問題整理清楚： 如何做可靠的分布式锁，Redlock真的可行么 https://twgreatdaily.com/fGfHe28BMH2_cNUgKj2O.html 概念 悲觀鎖（Pessimistic Lock） 預期每次都會遇到資源爭奪。
共享鎖（Share Lock） 排他鎖（Exclusive Lock）
作用範圍：
行鎖（row lock） FOR UPDATE、FOR UPDATE NO KEY、LOCK IN SHARE MODE
表鎖（table lock）
SELECT SUM(..) FROM .. 樂觀鎖（Optimistic Lock） Optimistic Concurrency Control 每次存取都認為不會有別人來搶。
CAS（比較與交換，Compare and swap）
非阻塞同步（Non-blocking Synchronization）、無鎖程式設計演算法（ Non-blocking algorithm）
適合：讀多寫少。 反之，將有很多的寫衝突造成等待
CAS有3個運算元 記憶體值V 舊的預期值A 要修改的新值B 當且僅當預期值A和記憶體值V相同時，將記憶體值V修改為B，否則什麼都不做。 整個CAS操作是一個原子操作 判斷作法 TimeStamp Version 待更新欄位：更新前可以拿要更新的欄位的舊值和資料庫的現值進行比對，沒有變化則更新 https://stackoverflow....</p></section><footer class=entry-footer>January 27, 2022</footer><a class=entry-link aria-label="post link to Lock" href=https://harveyChang67.github.io/posts/lock/></a></article><article class=post-entry><header class=entry-header><h2>Azure_devops_reader</h2></header><section class=entry-content><p>Azure Devops 內的 Git 權限設定，AZ-400會有考題問到關於 Pull、Push 所需要設定的權限。
實際測試要有 「Contribute」 才能 Push。</p></section><footer class=entry-footer>January 26, 2022</footer><a class=entry-link aria-label="post link to Azure_devops_reader" href=https://harveyChang67.github.io/posts/azure_devops_reader/></a></article><article class=post-entry><header class=entry-header><h2>Deploy_local_git_to_azure_app_service</h2></header><section class=entry-content><p>Go Deployment in Menu then select Local Git item. Configure credential. Push Source to Git Repo @ Azure</p></section><footer class=entry-footer>January 11, 2022</footer><a class=entry-link aria-label="post link to Deploy_local_git_to_azure_app_service" href=https://harveyChang67.github.io/posts/deploy_local_git_to_azure_app_service/></a></article><article class=post-entry><header class=entry-header><h2>Azure_portal_devops_config</h2></header><section class=entry-content><p>AAD > Enterprise Application > devops > User : Azure Devops 側還是無法.取得訂閱資訊
就算由 Owner 建好 Service Connection 也無法讓 guest、member 直接使用，原因是操作 pipeline 的 account 對於訂閱的權限不夠。 從 Azure Portal 處給予該 account 至少 Reader 的角色 訂閱 > IAM > add role assignment
但是此法有缺點，無法單一授權、指定 project 授權。</p></section><footer class=entry-footer>January 1, 2022</footer><a class=entry-link aria-label="post link to Azure_portal_devops_config" href=https://harveyChang67.github.io/posts/azure_portal_devops_config/></a></article><article class=post-entry><header class=entry-header><h2>Linux_run_sh_error</h2></header><section class=entry-content><p>Linux 執行 .sh 後出現 Syntax Error
Syntax error: end of file unexpected (expecting “then”)
問題不是語法錯誤，而是檔案編碼問題。
解決辦法是：
dos2unix 或是 VSCode 右下方從 CRLF --> LF</p></section><footer class=entry-footer>December 29, 2021</footer><a class=entry-link aria-label="post link to Linux_run_sh_error" href=https://harveyChang67.github.io/posts/linux_run_sh_error/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://harveyChang67.github.io/posts/page/2/>« Prev Page</a>
<a class=next href=https://harveyChang67.github.io/posts/page/4/>Next Page »</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href=https://harveyChang67.github.io/>隨筆</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>